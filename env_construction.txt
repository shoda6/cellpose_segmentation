1. construction of deep learning
1.1 Installation
1.1.1 Install Tensorflow

(cellpose) yeakiest@DESKTOP-4D9LBG8:/mnt/d/200_GitHub_Repository/cellpose_segmentation
$ /usr/local/cuda/bin/nvcc --version
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2023 NVIDIA Corporation
Built on Fri_Nov__3_17:16:49_PDT_2023
Cuda compilation tools, release 12.3, V12.3.103
Build cuda_12.3.r12.3/compiler.33492891_0

https://docs.nvidia.com/cuda/wsl-user-guide/index.html#abstract

バージョンですが、この記事作成時は最新の 12.1.0 を入れたらTensorflowが認識しませんでした。
（多分まだ12台のバージョンにTensorflowが対応していない？）

pip install tensorflow
pip install tensorflow[and-cuda]

これでもだめ

cuda12系ではtensorflowがGPUを認識しないので、cuda11系を入れる必要がある
（tensorflow 2.15が2023/11にdisributeされたが、まだ安定的ではないらしいので。かつPython3.9以上らしい。cellposeは3.8系で作ってしまっている）

なのでcuda11系を入れる　https://developer.nvidia.com/cuda-11-8-0-download-archive?target_os=Linux&target_arch=x86_64&Distribution=WSL-Ubuntu&target_version=2.0&target_type=deb_local
wget https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin
sudo mv cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600
wget https://developer.download.nvidia.com/compute/cuda/11.8.0/local_installers/cuda-repo-wsl-ubuntu-11-8-local_11.8.0-1_amd64.deb
sudo dpkg -i cuda-repo-wsl-ubuntu-11-8-local_11.8.0-1_amd64.deb
sudo cp /var/cuda-repo-wsl-ubuntu-11-8-local/cuda-*-keyring.gpg /usr/share/keyrings/
sudo apt-get update
sudo apt-get -y install cuda

